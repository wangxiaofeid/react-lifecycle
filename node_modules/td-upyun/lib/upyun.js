"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var sign = require("./sign");
var create_req_1 = require("./create-req");
var Client = /** @class */ (function () {
    // private bodySignCallback: (service: Service, params: any) => { policy: string, authorization: string};
    function Client(service, params, getHeaderSign) {
        var config = Object.assign({
            domain: 'v0.api.upyun.com',
            protocol: 'https'
        }, params);
        this.endpoint = config.protocol + '://' + config.domain;
        this.service = service;
        this.req = create_req_1.default({
            endpoint: this.endpoint,
            service: this.service,
            getHeaderSign: getHeaderSign || sign.getHeaderSign
        });
        // this.setBodySignCallback(sign.getPolicyAndAuthorization);
    }
    // setBodySignCallback (getBodySign: (service: Service, params: any) => { policy: string, authorization: string}) {
    //   if (typeof getBodySign !== 'function') {
    //     throw new Error('upyun - getBodySign should be a function');
    //   }
    //   this.bodySignCallback = getBodySign;
    // }
    Client.prototype.usage = function (path) {
        var _this = this;
        if (path === void 0) { path = '/'; }
        return new Promise(function (resolve) {
            _this.req.get(path + '?usage').then(function (_a) {
                var data = _a.data;
                resolve(data);
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    Client.prototype.listDir = function (path, _a) {
        var _this = this;
        if (path === void 0) { path = '/'; }
        var _b = _a === void 0 ? {} : _a, _c = _b.limit, limit = _c === void 0 ? 100 : _c, _d = _b.order, order = _d === void 0 ? 'asc' : _d, _e = _b.iter, iter = _e === void 0 ? '' : _e;
        var requestHeaders = {};
        // NOTE: 默认值可以省去请求头设置，避免跨域影响
        if (limit !== 100) {
            requestHeaders['x-list-limit'] = limit;
        }
        if (order !== 'asc') {
            requestHeaders['x-list-order'] = order;
        }
        if (iter) {
            requestHeaders['x-list-iter'] = iter;
        }
        return new Promise(function (resolve) {
            _this.req.get(path, {
                headers: requestHeaders
            }).then(function (res) {
                var body = res.body, headers = res.headers, statusCode = res.statusCode;
                if (statusCode === 404) {
                    resolve(false);
                }
                var next = headers['x-upyun-list-iter'];
                if (!body) {
                    resolve({
                        files: [],
                        next: next
                    });
                }
                var items = body.split('\n');
                var files = items.map(function (item) {
                    var _a = item.split('\t'), name = _a[0], type = _a[1], size = _a[2], time = _a[3];
                    return {
                        name: name,
                        type: type,
                        size: parseInt(size),
                        time: parseInt(time)
                    };
                });
                resolve({
                    files: files,
                    next: next
                });
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    Client.prototype.makeDir = function (remotePath) {
        var _this = this;
        return new Promise(function (resolve) {
            _this.req.post(remotePath, {
                headers: { folder: 'true' }
            }).then(function (_a) {
                var statusCode = _a.statusCode;
                resolve(statusCode === 200);
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    Client.prototype.headFile = function (remotePath) {
        var _this = this;
        return new Promise(function (resolve) {
            _this.req.head(remotePath).then(function (_a) {
                var headers = _a.headers, statusCode = _a.statusCode;
                if (statusCode === 404) {
                    resolve(false);
                }
                var params = ['x-upyun-file-type', 'x-upyun-file-size', 'x-upyun-file-date', 'Content-Md5'];
                var result = {};
                params.forEach(function (item) {
                    var key = item.split('x-upyun-file-')[1];
                    if (headers[item]) {
                        result[key] = headers[item];
                        if (key === 'size' || key === 'date') {
                            result[key] = parseInt(result[key], 10);
                        }
                    }
                });
                resolve(result);
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    Client.prototype.deleteFile = function (remotePath, isAsync) {
        var _this = this;
        if (isAsync === void 0) { isAsync = false; }
        var headers = {};
        if (isAsync) {
            headers['x-upyun-async'] = true;
        }
        return new Promise(function (resolve) {
            _this.req.delete(remotePath, {
                headers: headers
            }).then(function (_a) {
                var statusCode = _a.statusCode;
                resolve(statusCode === 200);
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    Client.prototype.deleteDir = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return this.deleteFile.apply(this, args);
    };
    Client.prototype.putFile = function (remotePath, localFile, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        // optional params
        var keys = ['Content-MD5', 'Content-Length', 'Content-Type', 'Content-Secret', 'x-gmkerl-thumb'];
        var headers = {};
        keys.forEach(function (key) {
            var lower = key.toLowerCase();
            var finded = options[key] || options[lower];
            if (finded) {
                headers[key] = finded;
            }
            else if (isMeta(key)) {
                headers[key] = options[key];
            }
        });
        return new Promise(function (resolve) {
            _this.req.put(remotePath, {
                body: localFile,
                headers: headers
            }).then(function (res) {
                if (res.statusCode !== 200) {
                    resolve(false);
                    return;
                }
                var responseHeaders = res.headers;
                var params = ['x-upyun-width', 'x-upyun-height', 'x-upyun-file-type', 'x-upyun-frames'];
                var result = {};
                params.forEach(function (item) {
                    var key = item.split('x-upyun-')[1];
                    if (responseHeaders[item]) {
                        result[key] = responseHeaders[item];
                        if (key !== 'file-type') {
                            result[key] = parseInt(result[key], 10);
                        }
                    }
                });
                resolve(Object.keys(result).length > 0 ? result : true);
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    Client.prototype.getFile = function (remotePath, saveStream) {
        var _this = this;
        return new Promise(function (resolve) {
            _this.req.get(remotePath).then(function (response) {
                if (response.status === 404) {
                    resolve(false);
                    return;
                }
                if (!saveStream) {
                    resolve(response.data);
                    return;
                }
                var stream = response.data.pipe(saveStream);
                resolve(new Promise(function (_resolve, _reject) {
                    stream.on('finish', function () { return _resolve(stream); });
                    stream.on('error', _reject);
                }));
            })
                .catch(function (e) {
                console.log(e.error);
                resolve(false);
            });
        });
    };
    return Client;
}());
exports.Client = Client;
function isMeta(key) {
    return key.indexOf('x-upyun-meta-') === 0;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXB5dW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdXB5dW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSw2QkFBK0I7QUFFL0IsMkNBQThDO0FBUTlDO0lBSUUseUdBQXlHO0lBRXpHLGdCQUFZLE9BQWdCLEVBQUUsTUFBZSxFQUFFLGFBQWdDO1FBQzdFLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDM0IsTUFBTSxFQUFFLGtCQUFrQjtZQUMxQixRQUFRLEVBQUUsT0FBTztTQUNsQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ1gsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxHQUFHLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ3hELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxHQUFHLEdBQUcsb0JBQVMsQ0FBQztZQUNuQixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDdkIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1lBQ3JCLGFBQWEsRUFBRSxhQUFhLElBQUksSUFBSSxDQUFDLGFBQWE7U0FDbkQsQ0FBQyxDQUFDO1FBQ0gsNERBQTREO0lBQzlELENBQUM7SUFFRCxtSEFBbUg7SUFDbkgsNkNBQTZDO0lBQzdDLG1FQUFtRTtJQUNuRSxNQUFNO0lBQ04seUNBQXlDO0lBQ3pDLElBQUk7SUFFSixzQkFBSyxHQUFMLFVBQU8sSUFBVTtRQUFqQixpQkFVQztRQVZNLHFCQUFBLEVBQUEsVUFBVTtRQUNmLE9BQU8sSUFBSSxPQUFPLENBQUMsVUFBQSxPQUFPO1lBQ3hCLEtBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxFQUFNO29CQUFMLGNBQUk7Z0JBQ3ZDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoQixDQUFDLENBQUM7aUJBQ0QsS0FB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