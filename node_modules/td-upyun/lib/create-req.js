"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var rq = require("request-promise");
var Req = /** @class */ (function () {
    function Req(options) {
        this.baseURL = options.endpoint + "/" + options.service.serviceName;
        this.service = options.service;
        this.getHeaderSign = options.getHeaderSign;
    }
    Req.prototype.get = function (uri, options) {
        return rq.get(encodeURI("" + this.baseURL + uri), this.genOptions(uri, 'GET', options));
    };
    Req.prototype.post = function (uri, options) {
        return rq.post(encodeURI("" + this.baseURL + uri), this.genOptions(uri, 'POST', options));
    };
    Req.prototype.put = function (uri, options) {
        return rq.put(encodeURI("" + this.baseURL + uri), this.genOptions(uri, 'PUT', options));
    };
    Req.prototype.head = function (uri, options) {
        return rq.head(encodeURI("" + this.baseURL + uri), this.genOptions(uri, 'HEAD', options));
    };
    Req.prototype.delete = function (uri, options) {
        return rq.delete(encodeURI("" + this.baseURL + uri), this.genOptions(uri, 'DELETE', options));
    };
    Req.prototype.patch = function (uri, options) {
        return rq.patch(encodeURI("" + this.baseURL + uri), this.genOptions(uri, 'PATCH', options));
    };
    Req.prototype.genOptions = function (uri, method, options) {
        var headers = this.getHeaderSign(this.service, method, uri);
        return Object.assign({}, options, {
            resolveWithFullResponse: true,
            method: method,
            headers: headers,
            proxy: this.service.proxy
        });
    };
    return Req;
}());
exports.Req = Req;
function default_1(options) {
    return new Req(options);
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLXJlcS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGUtcmVxLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsb0NBQXNDO0FBVXRDO0lBS0UsYUFBWSxPQUFrQjtRQUM1QixJQUFJLENBQUMsT0FBTyxHQUFNLE9BQU8sQ0FBQyxRQUFRLFNBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFhLENBQUM7UUFDcEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBQy9CLElBQUksQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztJQUM3QyxDQUFDO0lBRUQsaUJBQUcsR0FBSCxVQUFJLEdBQVcsRUFBRSxPQUE4QztRQUM3RCxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMxRixDQUFDO0lBRUQsa0JBQUksR0FBSixVQUFLLEdBQVcsRUFBRSxPQUE4QztRQUM5RCxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1RixDQUFDO0lBRUQsaUJBQUcsR0FBSCxVQUFJLEdBQVcsRUFBRSxPQUE4QztRQUM3RCxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMxRixDQUFDO0lBRUQsa0JBQUksR0FBSixVQUFLLEdBQVcsRUFBRSxPQUE4QztRQUM5RCxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1RixDQUFDO0lBRUQsb0JBQU0sR0FBTixVQUFPLEdBQVcsRUFBRSxPQUE4QztRQUNoRSxPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUNoRyxDQUFDO0lBRUQsbUJBQUssR0FBTCxVQUFNLEdBQVcsRUFBRSxPQUE4QztRQUMvRCxPQUFPLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM5RixDQUFDO0lBRU8sd0JBQVUsR0FBbEIsVUFBbUIsR0FBVyxFQUFFLE1BQWMsRUFBRSxPQUE4QztRQUM1RixJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzlELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFO1lBQ2hDLHVCQUF1QixFQUFFLElBQUk7WUFDN0IsTUFBTSxRQUFBO1lBQ04sT0FBTyxTQUFBO1lBQ1AsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSztTQUMxQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0gsVUFBQztBQUFELENBQUMsQUE1Q0QsSUE0Q0M7QUE1Q1ksa0JBQUc7QUE4Q2hCLG1CQUF3QixPQUFrQjtJQUN4QyxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFCLENBQUM7QUFGRCw0QkFFQyJ9